(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('NaturalGallery',[],t):'object'==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()})(this,function(){var t=Math.round,e=Math.floor;return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=2)}([function(e,t,n){'use strict';n.d(t,'a',function(){return a});var a;(function(e){e.getIcon=function(e){const t=document.createElementNS('http://www.w3.org/2000/svg','svg');return t.setAttribute('viewBox','0 0 100 100'),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){const n=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(n,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?' ':'')+t)},e.hasClass=function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},e.uniqBy=function(e,t){const n=[];return e.forEach(function(e){const a=n.some(function(n){return e[t]===n[t]});a||n.push(e)}),n},e.differenceBy=function(e,t,n){const a=[];return e.forEach(function(e){const i=t.some(function(t){return e[n]===t[n]});i||a.push(e)}),a},e.intersectionBy=function(e,t,n){const a=[];return e.forEach(function(e){const i=t.some(function(t){return e[n]===t[n]});i&&a.push(e)}),a};const t=[{base:'A',letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:'AA',letters:/[\uA732]/g},{base:'AE',letters:/[\u00C6\u01FC\u01E2]/g},{base:'AO',letters:/[\uA734]/g},{base:'AU',letters:/[\uA736]/g},{base:'AV',letters:/[\uA738\uA73A]/g},{base:'AY',letters:/[\uA73C]/g},{base:'B',letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:'C',letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:'D',letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:'DZ',letters:/[\u01F1\u01C4]/g},{base:'Dz',letters:/[\u01F2\u01C5]/g},{base:'E',letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:'F',letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:'G',letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:'H',letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:'I',letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:'J',letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:'K',letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:'L',letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:'LJ',letters:/[\u01C7]/g},{base:'Lj',letters:/[\u01C8]/g},{base:'M',letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:'N',letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:'NJ',letters:/[\u01CA]/g},{base:'Nj',letters:/[\u01CB]/g},{base:'O',letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:'OI',letters:/[\u01A2]/g},{base:'OO',letters:/[\uA74E]/g},{base:'OU',letters:/[\u0222]/g},{base:'P',letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:'Q',letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:'R',letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:'S',letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:'T',letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:'TZ',letters:/[\uA728]/g},{base:'U',letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:'V',letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:'VY',letters:/[\uA760]/g},{base:'W',letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:'X',letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:'Y',letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:'Z',letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:'a',letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:'aa',letters:/[\uA733]/g},{base:'ae',letters:/[\u00E6\u01FD\u01E3]/g},{base:'ao',letters:/[\uA735]/g},{base:'au',letters:/[\uA737]/g},{base:'av',letters:/[\uA739\uA73B]/g},{base:'ay',letters:/[\uA73D]/g},{base:'b',letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:'c',letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:'d',letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:'dz',letters:/[\u01F3\u01C6]/g},{base:'e',letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:'f',letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:'g',letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:'h',letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:'hv',letters:/[\u0195]/g},{base:'i',letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:'j',letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:'k',letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:'l',letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:'lj',letters:/[\u01C9]/g},{base:'m',letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:'n',letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:'nj',letters:/[\u01CC]/g},{base:'o',letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:'oi',letters:/[\u01A3]/g},{base:'ou',letters:/[\u0223]/g},{base:'oo',letters:/[\uA74F]/g},{base:'p',letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:'q',letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:'r',letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:'s',letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:'t',letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:'tz',letters:/[\uA729]/g},{base:'u',letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:'v',letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:'vy',letters:/[\uA761]/g},{base:'w',letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:'x',letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:'y',letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:'z',letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var n=0;n<t.length;n++)e=e.replace(t[n].letters,t[n].base);return e}})(a||(a={}))},function(e,t){'use strict';class n{constructor(e){this.header=e,this._collection=null}isActive(){return null!==this.collection}get collection(){return this._collection}set collection(e){this._collection=e}}t.a=n},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.add=function(e){return s.a.getInstance().addGallery(e)},t.getById=function(e){s.a.getInstance().getById(e)};var a=n(3),i=n.n(a),l=n(4),o=n.n(l),s=n(5);'undefined'!=typeof naturalGalleries&&naturalGalleries.constructor===Array&&s.a.getInstance().addGalleries(naturalGalleries)},function(){},function(){},function(e,t,n){'use strict';var a=n(6);class i{constructor(){this.old_scroll_top=0,this.galleries=[],this.bindEvents(),this.pswp=document.getElementsByClassName('pswp')[0]}static getInstance(){return i.instance?i.instance:new i}addGalleries(e=null){e.forEach(function(t,n){e[n]=this.addGallery(t)},this)}addGallery(e){if(e)return e=new a.a(e,this.pswp),this.galleries.push(e),e}getById(e){let t=null;return this.galleries.forEach(function(n){n.id===e&&(t=n)}),t}resize(){this.galleries.forEach(function(e){e.resize()})}bindEvents(){let e=this;document.addEventListener('scroll',function(){if(1===e.galleries.length&&0===e.galleries[0].options.limit){let t=e.galleries[0],n=t.rootElement.offsetTop+t.rootElement.offsetHeight+60,a=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),i=window.innerHeight,l=a-e.old_scroll_top;e.old_scroll_top=a,0<l&&a+i>n&&e.galleries[0].addElements(1)}})}}t.a=i,i.instance=null},function(t,n,a){'use strict';var i=a(7),l=a(10),o=a(11),s=a(12),r=a(0),d=a(14);class p{constructor(t,n){for(var a in this._options={rowHeight:350,format:'natural',round:3,margin:3,limit:0,showLabels:'hover',lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:'Category',labelNone:'None',labelOthers:'Others',labelSearch:'Search',labelImages:'Images'},this._pswpContainer=[],this._collection=[],this._categories=[],this.pswpElement=n,this.options)'undefined'==typeof t.options[a]&&(t.options[a]=this.options[a]);this.options=t.options,this.categories=t.categories?t.categories:[],this.rootElement=t.element?t.element:document.getElementById(t.id),r.a.addClass(this.rootElement,'natural-gallery'),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new l.a(this),this.options.searchFilter&&this.header.addFilter(new o.a(this.header)),this.options.categoriesFilter&&this.header.addFilter(new s.a(this.header))),this.render(),this.bodyWidth=e(this.bodyElement.getBoundingClientRect().width),t.images&&(this.collection=t.images)}render(){const t=this;let e=document.createElement('div');r.a.addClass(e,'natural-gallery-noresults'),e.appendChild(r.a.getIcon('icon-noresults'));let n=document.createElement('div');r.a.addClass(n,'natural-gallery-next'),n.appendChild(r.a.getIcon('icon-next')),n.addEventListener('click',function(n){n.preventDefault(),t.addElements()});let a=document.createElement('iframe');a.addEventListener('load',function(){let e=null;this.contentWindow.addEventListener('resize',function(){clearTimeout(e),e=setTimeout(function(){t.resize()},100)})}),this.bodyElement=document.createElement('div'),r.a.addClass(this.bodyElement,'natural-gallery-body'),this.bodyElement.appendChild(e),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(n),this.rootElement.appendChild(a)}appendItems(e){let t=!1;0===this.collection.length&&(t=!0),e.forEach(function(e){e.id=this._collection.length,this._collection.push(new i.a(e,this))},this),d.a.organize(this),this.header&&this.header.refresh(),t&&this.addElements()}style(){this.collection.forEach(function(e){e.style()})}addElements(e=null){let t=this.collection,n=this.rootElement.getElementsByClassName('natural-gallery-next')[0];if(n&&(n.style.display='block'),this.pswpContainer.length===t.length)return n.style.display='none',void(0===t.length&&(this.rootElement.getElementsByClassName('natural-gallery-noresults')[0].style.display='block',this.rootElement.getElementsByClassName('natural-gallery-images')[0].style.display='none'));e||(e=this.getRowsPerPage(this));let a=this.pswpContainer.length,l=this.pswpContainer.length?t[a].row+e:e;for(let o,s=a;s<t.length;s++)o=t[s],o.row<l&&(this.pswpContainer.push(o.getPswpItem()),this.bodyElement.appendChild(o.loadElement()),o.bindClick(),o.flash()),this.pswpContainer.length===t.length&&(n.style.display='none');let i=this.rootElement.getElementsByClassName('natural-gallery-noresults')[0];i&&(i.style.display='none');let o=this.rootElement.getElementsByClassName('natural-gallery-images')[0];o&&(o.style.display='block');let s=this.rootElement.getElementsByClassName('natural-gallery-visible')[0];s&&(s.textContent=this.pswpContainer.length+'');let r=this.rootElement.getElementsByClassName('natural-gallery-total')[0];r&&(r.textContent=t.length+'')}getRowsPerPage(t){if(this.options.limit)return this.options.limit;let n=window.outerHeight,a=n-t.bodyElement.offsetTop,i=e(a/(0.7*this.options.rowHeight));return i<this.options.minRowsAtStart?this.options.minRowsAtStart:i}resize(){let t=e(this.bodyElement.getBoundingClientRect().width);if(t!==this.bodyWidth){this.bodyWidth=t,d.a.organize(this);let e=this.collection[this.pswpContainer.length-1].row+1;this.reset(),this.addElements(e)}}refresh(){this.reset(),d.a.organize(this),this.addElements()}reset(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()});let e=this.rootElement.getElementsByClassName('natural-gallery-noresults')[0];e&&(e.style.display='none')}set images(e){this.collection=e}get id(){return this._id}set id(e){this._id=e}get pswpContainer(){return this._pswpContainer}set pswpContainer(e){this._pswpContainer=e}get collection(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection}getOriginalCollection(){return this._collection}set collection(e){this._collection=[],this.appendItems(e)}get bodyWidth(){return this._bodyWidth}set bodyWidth(e){this._bodyWidth=e}get bodyElement(){return this._bodyElement}set bodyElement(e){this._bodyElement=e}get rootElement(){return this._rootElement}set rootElement(e){this._rootElement=e}get pswpApi(){return this._pswpApi}set pswpApi(e){this._pswpApi=e}get pswpElement(){return this._pswpElement}set pswpElement(e){this._pswpElement=e}get options(){return this._options}set options(e){this._options=e}get header(){return this._header}set header(e){this._header=e}get categories(){return this._categories}set categories(e){this._categories=e}}n.a=p},function(e,t,n){'use strict';var a=n(0),i=n(8),l=n.n(i),o=n(9),s=n.n(o);class r{constructor(e,t){this.fields=e,this.gallery=t,this._binded=!1,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}getTitle(e){return e.title?this.getTitleDetails(e.title).title:null}getLink(e){return e.link?e.link:this.getTitleDetails(e.title).link}getLinkTarget(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget}getTitleDetails(e){let t=document.createElement('div');t.innerHTML=e;let n=t.getElementsByTagName('a'),a={title:t.textContent,link:null,linkTarget:null};return n[0]&&(a.link=n[0].getAttribute('href'),a.linkTarget=n[0].getAttribute('target')),a}createElement(){let e=this.gallery.options,t=null;this.title&&-1<['true','hover'].indexOf(e.showLabels)&&(t=!0);let n=document.createElement('div'),i=document.createElement('div'),l=this.getLinkElement();if(e.lightbox&&t&&l?(t=l,a.a.addClass(t,'button'),a.a.addClass(i,'zoomable')):e.lightbox&&t&&!l?(t=document.createElement('div'),a.a.addClass(n,'zoomable')):e.lightbox&&!t?a.a.addClass(n,'zoomable'):!e.lightbox&&t&&l?(n=l,t=document.createElement('div')):e.lightbox||!t||l?!e.lightbox&&!t&&l&&(n=l):t=document.createElement('div'),a.a.addClass(i,'image'),a.a.addClass(n,'figure loading visible'),i.style.backgroundImage='url('+this.thumbnail+')',n.appendChild(i),e.round){let t=e.round+'px';n.style.borderRadius=t,i.style.borderRadius=t}this.element=n,this.image=i,t&&(t.textContent=this.title,a.a.addClass(t,'title'),'hover'===e.showLabels&&a.a.addClass(t,'hover'),n.appendChild(t))}getLinkElement(){let e=null;return this.link&&(e=document.createElement('a'),e.setAttribute('href',this.link),a.a.addClass(e,'link'),this.linkTarget&&e.setAttribute('target',this.linkTarget)),e}style(){a.a.removeClass(this.element,'visible'),this.element.style.width=this.width+'px',this.element.style.height=this.height+'px',this.element.style.marginRight=this.gallery.options.margin+'px',this.element.style.marginBottom=this.gallery.options.margin+'px',this.last&&(this.element.style.marginRight='0'),this.image.style.width=this.width+'px',this.image.style.height=this.height+'px';const e=this;window.setTimeout(function(){a.a.addClass(e.element,'visible')},0)}flash(){const e=this;a.a.removeClass(this.element,'visible'),window.setTimeout(function(){a.a.addClass(e.element,'visible')},0)}bindClick(){if(!this.gallery.options.lightbox)return;const t=this;if(this.binded)return;this.binded=!0;let e=null;e=this.link?this.image:this.element,e.addEventListener('click',function(n){t.openPhotoSwipe.call(t,n,t.element)})}openPhotoSwipe(t,e){t.preventDefault();let n=this;if(!this.gallery.options.lightbox)return;let a=Array.prototype.slice.call(e.parentNode.children),l=a.indexOf(e)-1,s=new i(this.gallery.pswpElement,o,this.gallery.pswpContainer,{index:l,bgOpacity:0.85,showHideOpacity:!0,loop:!1});this.gallery.pswpApi=s,s.init();let r=null;s.listen('beforeChange',function(e){0<e&&s.getCurrentIndex()===s.items.length-1?n.gallery.addElements():e===-1*(s.items.length-1)&&(r=s.items.length,n.gallery.addElements())}),s.listen('afterChange',function(){r&&(s.goTo(r),r=null)})}getPswpItem(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}}getElement(){return this.element}loadElement(){const e=this;let t=document.createElement('img');return t.setAttribute('src',this.thumbnail),t.addEventListener('load',function(){a.a.removeClass(e.element,'loading'),a.a.addClass(e.element,'loaded')}),t.addEventListener('error',function(){a.a.addClass(e.element,'errored')}),this.element}remove(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())}get id(){return this._id}set id(e){this._id=e}get thumbnail(){return this._thumbnail}set thumbnail(e){this._thumbnail=e}get enlarged(){return this._enlarged}set enlarged(e){this._enlarged=e}get title(){return this._title}set title(e){this._title=e}get tWidth(){return this._tWidth}set tWidth(e){this._tWidth=e}get tHeight(){return this._tHeight}set tHeight(e){this._tHeight=e}get eWidth(){return this._eWidth}set eWidth(e){this._eWidth=e}get eHeight(){return this._eHeight}set eHeight(e){this._eHeight=e}get last(){return this._last}set last(e){this._last=e}get categories(){return this._categories}set categories(e){this._categories=e}get row(){return this._row}set row(e){this._row=e}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get description(){return this._description}set description(e){this._description=e}get binded(){return this._binded}set binded(e){this._binded=e}get link(){return this._link}set link(e){this._link=e}get linkTarget(){return this._linkTarget}set linkTarget(e){this._linkTarget=e}}t.a=r},function(e,n,a){var i,l;(function(t,o){i=o,l='function'==typeof i?i.call(n,a,n,e):i,!(l!==void 0&&(e.exports=l))})(this,function(){'use strict';return function(e,n,a,i){var l=Math.min,o=Math.abs,s=Math.max,r=Math.PI,d={features:null,bind:function(e,t,n,a){var l=(a?'remove':'add')+'EventListener';t=t.split(' ');for(var o=0;o<t.length;o++)t[o]&&e[l](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||'div');return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,n){d.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(n,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},addClass:function(e,t){d.hasClass(e,t)||(e.className+=(e.className?' ':'')+t)},hasClass:function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(d.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var a=e.length;a--;)if(e[a][n]===t)return a;return-1},extend:function(e,t,n){for(var a in t)if(t.hasOwnProperty(a)){if(n&&e.hasOwnProperty(a))continue;e[a]=t[a]}},easing:{sine:{out:function(e){return Math.sin(e*(r/2))},inOut:function(e){return-(Math.cos(r*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(d.features)return d.features;var e=d.createEl(),t=e.style,n='',l={};if(l.oldIE=document.all&&!document.addEventListener,l.touch='ontouchstart'in window,window.requestAnimationFrame&&(l.raf=window.requestAnimationFrame,l.caf=window.cancelAnimationFrame),l.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!l.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&0<r.length&&(r=parseInt(r[1],10),1<=r&&8>r&&(l.isOldIOSPhone=!0))}var p=o.match(/Android\s([0-9\.]*)/),c=p?p[1]:0;c=parseFloat(c),1<=c&&(4.4>c&&(l.isOldAndroid=!0),l.androidVersion=c),l.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var m,u,h=['transform','perspective','animationName'],g=['','webkit','Moz','ms','O'],y=0;4>y;y++){n=g[y];for(var i=0;3>i;i++)m=h[i],u=n+(n?m.charAt(0).toUpperCase()+m.slice(1):m),!l[m]&&u in t&&(l[m]=u);n&&!l.raf&&(n=n.toLowerCase(),l.raf=window[n+'RequestAnimationFrame'],l.raf&&(l.caf=window[n+'CancelAnimationFrame']||window[n+'CancelRequestAnimationFrame']))}if(!l.raf){var a=0;l.raf=function(e){var t=new Date().getTime(),n=s(0,16-(t-a)),i=window.setTimeout(function(){e(t+n)},n);return a=t+n,i},l.caf=function(e){clearTimeout(e)}}return l.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect,d.features=l,l}};d.detectFeatures(),d.features.oldIE&&(d.bind=function(e,t,n,a){t=t.split(' ');for(var l,o=(a?'detach':'attach')+'Event',s=function(){n.handleEvent.call(n)},r=0;r<t.length;r++)if(l=t[r],l)if('object'==typeof n&&n.handleEvent){if(!a)n['oldIE'+l]=s;else if(!n['oldIE'+l])return!1;e[o]('on'+l,n['oldIE'+l])}else e[o]('on'+l,n)});var c=this,m=25,u=3,h={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(e){return'A'===e.tagName},getDoubleTapZoom:function(e,t){return e?1:0.7>t.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:'fit'};d.extend(h,i);var g,y,x,f,b,w,C,E,v,_,I,T,k,S,D,A,O,F,R,L,N,z,P,Z,B,H,M,W,K,U,q,G,Y,V,X,j,$,J,Q,ee,te,ne,ae,ie,le,oe,se,re,de,pe,ce,me,ue,he,ge,ye,xe,fe=function(){return{x:0,y:0}},be=fe(),we=fe(),Ce=fe(),Ee={},ve=0,_e={},Ie=fe(),Te=0,ke=!0,Se=[],De={},Ae=!1,Oe=function(e,t){d.extend(c,t.publicMethods),Se.push(e)},Fe=function(e){var t=ln();if(e>t-1)return e-t;return 0>e?t+e:e},Re={},Le=function(e,t){return Re[e]||(Re[e]=[]),Re[e].push(t)},Ne=function(e){var t=Re[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var a=0;a<t.length;a++)t[a].apply(c,n)}},ze=function(){return new Date().getTime()},Pe=function(e){ge=e,c.bg.style.opacity=e*h.bgOpacity},Ze=function(e,t,n,a,i){(!Ae||i&&i!==c.currItem)&&(a/=i?i.fitRatio:c.currItem.fitRatio),e[z]=T+t+'px, '+n+'px'+k+' scale('+a+')'},Be=function(e){pe&&(e&&(_>c.currItem.fitRatio?!Ae&&(xn(c.currItem,!1,!0),Ae=!0):Ae&&(xn(c.currItem),Ae=!1)),Ze(pe,Ce.x,Ce.y,_))},He=function(e){e.container&&Ze(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Me=function(e,t){t[z]=T+e+'px, 0px'+k},We=function(e,n){if(!h.loop&&n){var a=f+(Ie.x*ve-e)/Ie.x,i=t(e-vt.x);(0>a&&0<i||a>=ln()-1&&0>i)&&(e=vt.x+i*h.mainScrollEndFriction)}vt.x=e,Me(e,b)},Ke=function(e,t){var n=_t[e]-_e[e];return we[e]+be[e]+n-n*(t/I)},Ue=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},qe=function(e){e.x=t(e.x),e.y=t(e.y)},Ge=null,Ye=function(){Ge&&(d.unbind(document,'mousemove',Ye),d.addClass(e,'pswp--has_mouse'),h.mouseUsed=!0,Ne('mouseUsed')),Ge=setTimeout(function(){Ge=null},100)},Ve=function(){d.bind(document,'keydown',c),q.transform&&d.bind(c.scrollWrap,'click',c),h.mouseUsed||d.bind(document,'mousemove',Ye),d.bind(window,'resize scroll orientationchange',c),Ne('bindEvents')},Xe=function(){d.unbind(window,'resize scroll orientationchange',c),d.unbind(window,'scroll',v.scroll),d.unbind(document,'keydown',c),d.unbind(document,'mousemove',Ye),q.transform&&d.unbind(c.scrollWrap,'click',c),Q&&d.unbind(window,C,c),clearTimeout(G),Ne('unbindEvents')},je=function(e,t){var n=un(c.currItem,Ee,e);return t&&(de=n),n},$e=function(e){return e||(e=c.currItem),e.initialZoomLevel},Je=function(e){return e||(e=c.currItem),0<e.w?h.maxSpreadZoom:1},Qe=function(e,t,n,a){return a===c.currItem.initialZoomLevel?(n[e]=c.currItem.initialPosition[e],!0):(n[e]=Ke(e,a),n[e]>t.min[e])?(n[e]=t.min[e],!0):!!(n[e]<t.max[e])&&(n[e]=t.max[e],!0)},et=function(){if(z){var t=q.perspective&&!Z;return T='translate'+(t?'3d(':'('),void(k=q.perspective?', 0px)':')')}z='left',d.addClass(e,'pswp--ie'),Me=function(e,t){t.left=e+'px'},He=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,a=t*e.w,i=t*e.h;n.width=a+'px',n.height=i+'px',n.left=e.initialPosition.x+'px',n.top=e.initialPosition.y+'px'},Be=function(){if(pe){var e=pe,t=c.currItem,n=1<t.fitRatio?1:t.fitRatio,a=n*t.w,i=n*t.h;e.width=a+'px',e.height=i+'px',e.left=Ce.x+'px',e.top=Ce.y+'px'}}},tt=function(t){var e='';h.escKey&&27===t.keyCode?e='close':h.arrowKeys&&(37===t.keyCode?e='prev':39===t.keyCode&&(e='next')),!e||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,c[e]())},nt=function(t){!t||(ne||te||ce||$)&&(t.preventDefault(),t.stopPropagation())},at=function(){c.setScrollOffset(0,d.getScrollY())},it={},lt=0,ot=function(e){it[e]&&(it[e].raf&&H(it[e].raf),lt--,delete it[e])},st=function(e){it[e]&&ot(e),it[e]||(lt++,it[e]={})},rt=function(){for(var e in it)it.hasOwnProperty(e)&&ot(e)},dt=function(e,n,a,i,l,o,s){var r,t=ze();st(e);var d=function(){if(it[e]){if(r=ze()-t,r>=i)return ot(e),o(a),void(s&&s());o((a-n)*l(r/i)+n),it[e].raf=B(d)}};d()},pt=30,ct=10,mt={},p={},ut={},ht={},gt={},yt=[],xt={},ft=[],bt={},wt=0,Ct=fe(),Et=0,vt=fe(),_t=fe(),It=fe(),Tt=function(e,t){return e.x===t.x&&e.y===t.y},kt=function(e,t){return o(e.x-t.x)<m&&o(e.y-t.y)<m},St=function(e,t){return bt.x=o(e.x-t.x),bt.y=o(e.y-t.y),Math.sqrt(bt.x*bt.x+bt.y*bt.y)},Dt=function(){ae&&(H(ae),ae=null)},At=function(){Q&&(ae=B(At),Gt())},Ot=function(){return'fit'!==h.scaleMode||_!==c.currItem.initialZoomLevel},Ft=function(e,t){return e&&e!==document&&(e.getAttribute('class')&&-1<e.getAttribute('class').indexOf('pswp__scroll-wrap')?!1:t(e)?e:Ft(e.parentNode,t))},Rt={},Lt=function(t,e){return Rt.prevent=!Ft(t.target,h.isClickableElement),Ne('preventDragEvent',t,e,Rt),Rt.prevent},Nt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},zt=function(e,t,n){n.x=0.5*(e.x+t.x),n.y=0.5*(e.y+t.y)},Pt=function(e,t,n){if(50<e-V){var a=2<ft.length?ft.shift():{};a.x=t,a.y=n,ft.push(a),V=e}},Zt=function(){var e=Ce.y-c.currItem.initialPosition.y;return 1-o(e/(Ee.y/2))},Bt={},Ht={},Mt=[],Wt=function(t){for(;0<Mt.length;)Mt.pop();return P?(xe=0,yt.forEach(function(e){0===xe?Mt[0]=e:1===xe&&(Mt[1]=e),xe++})):-1<t.type.indexOf('touch')?t.touches&&0<t.touches.length&&(Mt[0]=Nt(t.touches[0],Bt),1<t.touches.length&&(Mt[1]=Nt(t.touches[1],Ht))):(Bt.x=t.pageX,Bt.y=t.pageY,Bt.id='',Mt[0]=Bt),Mt},Kt=function(e,t){var n,a,i,l,o=0,s=Ce[e]+t[e],r=0<t[e],d=vt.x+t.x,p=vt.x-xt.x;return n=s>de.min[e]||s<de.max[e]?h.panEndFriction:1,s=Ce[e]+t[e]*n,(h.allowPanToNext||_===c.currItem.initialZoomLevel)&&(pe?'h'===me&&'x'===e&&!te&&(r?(s>de.min[e]&&(n=h.panEndFriction,o=de.min[e]-s,a=de.min[e]-we[e]),(0>=a||0>p)&&1<ln()?(l=d,0>p&&d>xt.x&&(l=xt.x)):de.min.x!==de.max.x&&(i=s)):(s<de.max[e]&&(n=h.panEndFriction,o=s-de.max[e],a=we[e]-de.max[e]),(0>=a||0<p)&&1<ln()?(l=d,0<p&&d<xt.x&&(l=xt.x)):de.min.x!==de.max.x&&(i=s))):l=d,'x'===e)?(void 0!==l&&(We(l,!0),ie=l!==xt.x),de.min.x!==de.max.x&&(void 0===i?!ie&&(Ce.x+=t.x*n):Ce.x=i),void 0!==l):void(!ce&&!ie&&_>c.currItem.fitRatio&&(Ce[e]+=t[e]*n))},Ut=function(t){if(!('mousedown'===t.type&&0<t.button)){if(nn)return void t.preventDefault();if(!(J&&'mousedown'===t.type)){if(Lt(t,!0)&&t.preventDefault(),Ne('pointerDown'),P){var e=d.arraySearch(yt,t.pointerId,'id');0>e&&(e=yt.length),yt[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var n=Wt(t),a=n.length;le=null,rt(),Q&&1!==a||(Q=ue=!0,d.bind(window,C,c),j=ye=he=$=ie=ne=ee=te=!1,me=null,Ne('firstTouchStart',n),Ue(we,Ce),be.x=be.y=0,Ue(ht,n[0]),Ue(gt,ht),xt.x=Ie.x*ve,ft=[{x:ht.x,y:ht.y}],V=Y=ze(),je(_,!0),Dt(),At()),oe||!(1<a)||ce||ie||(I=_,te=!1,oe=ee=!0,be.y=be.x=0,Ue(we,Ce),Ue(mt,n[0]),Ue(p,n[1]),zt(mt,p,It),_t.x=o(It.x)-Ce.x,_t.y=o(It.y)-Ce.y,se=re=St(mt,p))}}},qt=function(t){if(t.preventDefault(),P){var e=d.arraySearch(yt,t.pointerId,'id');if(-1<e){var n=yt[e];n.x=t.pageX,n.y=t.pageY}}if(Q){var a=Wt(t);if(me||ne||oe)le=a;else if(vt.x!==Ie.x*ve)me='h';else{var i=o(a[0].x-ht.x)-o(a[0].y-ht.y);o(i)>=ct&&(me=0<i?'h':'v',le=a)}}},Gt=function(){if(le){var e=le.length;if(0!==e)if(Ue(mt,le[0]),ut.x=mt.x-ht.x,ut.y=mt.y-ht.y,oe&&1<e){if(ht.x=mt.x,ht.y=mt.y,!ut.x&&!ut.y&&Tt(le[1],p))return;Ue(p,le[1]),te||(te=!0,Ne('zoomGestureStarted'));var t=St(mt,p),n=$t(t);n>c.currItem.initialZoomLevel+c.currItem.initialZoomLevel/15&&(ye=!0);var a=1,i=$e(),l=Je();if(!(n<i))n>l&&(a=(n-l)/(6*i),1<a&&(a=1),n=l+a*i);else if(h.pinchToClose&&!ye&&I<=c.currItem.initialZoomLevel){var s=i-n,r=1-s/(i/1.2);Pe(r),Ne('onPinchClose',r),he=!0}else a=(i-n)/i,1<a&&(a=1),n=i-a*(i/3);0>a&&(a=0),se=t,zt(mt,p,Ct),be.x+=Ct.x-It.x,be.y+=Ct.y-It.y,Ue(It,Ct),Ce.x=Ke('x',n),Ce.y=Ke('y',n),j=n>_,_=n,Be()}else{if(!me)return;if(ue&&(ue=!1,o(ut.x)>=ct&&(ut.x-=le[0].x-gt.x),o(ut.y)>=ct&&(ut.y-=le[0].y-gt.y)),ht.x=mt.x,ht.y=mt.y,0===ut.x&&0===ut.y)return;if('v'===me&&h.closeOnVerticalDrag&&!Ot()){be.y+=ut.y,Ce.y+=ut.y;var d=Zt();return $=!0,Ne('onVerticalDrag',d),Pe(d),void Be()}Pt(ze(),mt.x,mt.y),ne=!0,de=c.currItem.bounds;var m=Kt('x',ut);m||(Kt('y',ut),qe(Ce),Be())}}},Yt=function(t){if(q.isOldAndroid){if(J&&'mouseup'===t.type)return;-1<t.type.indexOf('touch')&&(clearTimeout(J),J=setTimeout(function(){J=0},600))}Ne('pointerUp'),Lt(t,!1)&&t.preventDefault();var e;if(P){var n=d.arraySearch(yt,t.pointerId,'id');if(-1<n)if(e=yt.splice(n,1)[0],navigator.pointerEnabled)e.type=t.pointerType||'mouse';else{e.type={2:'touch',3:'pen',4:'mouse'}[t.pointerType],e.type||(e.type=t.pointerType||'mouse')}}var a,i=Wt(t),l=i.length;if('mouseup'===t.type&&(l=0),2===l)return le=null,!0;1===l&&Ue(gt,i[0]),0!==l||me||ce||(!e&&('mouseup'===t.type?e={x:t.pageX,y:t.pageY,type:'mouse'}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:'touch'})),Ne('touchRelease',t,e));var o=-1;if(0===l&&(Q=!1,d.unbind(window,C,c),Dt(),oe?o=0:-1!=Et&&(o=ze()-Et)),Et=1===l?ze():-1,a=-1!=o&&150>o?'zoom':'swipe',oe&&2>l&&(oe=!1,1===l&&(a='zoomPointerUp'),Ne('zoomGestureEnded')),le=null,ne||te||ce||$){if(rt(),X||(X=Vt()),X.calculateSwipeSpeed('x'),$){var s=Zt();if(s<h.verticalDragRange)c.close();else{var r=Ce.y,p=ge;dt('verticalDrag',0,1,300,d.easing.cubic.out,function(e){Ce.y=(c.currItem.initialPosition.y-r)*e+r,Pe((1-p)*e+p),Be()}),Ne('onVerticalDrag',1)}return}if((ie||ce)&&0===l){var m=jt(a,X);if(m)return;a='zoomPointerUp'}return ce?void 0:'swipe'===a?void(!ie&&_>c.currItem.fitRatio&&Xt(X)):void Jt()}},Vt=function(){var e,n,a={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(t){1<ft.length?(e=ze()-V+50,n=ft[ft.length-2][t]):(e=ze()-Y,n=gt[t]),a.lastFlickOffset[t]=ht[t]-n,a.lastFlickDist[t]=o(a.lastFlickOffset[t]),a.lastFlickSpeed[t]=20<a.lastFlickDist[t]?a.lastFlickOffset[t]/e:0,0.1>o(a.lastFlickSpeed[t])&&(a.lastFlickSpeed[t]=0),a.slowDownRatio[t]=0.95,a.slowDownRatioReverse[t]=1-a.slowDownRatio[t],a.speedDecelerationRatio[t]=1},calculateOverBoundsAnimOffset:function(e,t){a.backAnimStarted[e]||(Ce[e]>de.min[e]?a.backAnimDestination[e]=de.min[e]:Ce[e]<de.max[e]&&(a.backAnimDestination[e]=de.max[e]),a.backAnimDestination[e]!==void 0&&(a.slowDownRatio[e]=0.7,a.slowDownRatioReverse[e]=1-a.slowDownRatio[e],0.05>a.speedDecelerationRatioAbs[e]&&(a.lastFlickSpeed[e]=0,a.backAnimStarted[e]=!0,dt('bounceZoomPan'+e,Ce[e],a.backAnimDestination[e],t||300,d.easing.sine.out,function(t){Ce[e]=t,Be()}))))},calculateAnimOffset:function(e){a.backAnimStarted[e]||(a.speedDecelerationRatio[e]*=a.slowDownRatio[e]+a.slowDownRatioReverse[e]-a.slowDownRatioReverse[e]*a.timeDiff/10,a.speedDecelerationRatioAbs[e]=o(a.lastFlickSpeed[e]*a.speedDecelerationRatio[e]),a.distanceOffset[e]=a.lastFlickSpeed[e]*a.speedDecelerationRatio[e]*a.timeDiff,Ce[e]+=a.distanceOffset[e])},panAnimLoop:function(){if(it.zoomPan&&(it.zoomPan.raf=B(a.panAnimLoop),a.now=ze(),a.timeDiff=a.now-a.lastNow,a.lastNow=a.now,a.calculateAnimOffset('x'),a.calculateAnimOffset('y'),Be(),a.calculateOverBoundsAnimOffset('x'),a.calculateOverBoundsAnimOffset('y'),0.05>a.speedDecelerationRatioAbs.x&&0.05>a.speedDecelerationRatioAbs.y))return Ce.x=t(Ce.x),Ce.y=t(Ce.y),Be(),void ot('zoomPan')}};return a},Xt=function(e){return e.calculateSwipeSpeed('y'),de=c.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},0.05>=o(e.lastFlickSpeed.x)&&0.05>=o(e.lastFlickSpeed.y)?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset('x'),e.calculateOverBoundsAnimOffset('y'),!0):void(st('zoomPan'),e.lastNow=ze(),e.panAnimLoop())},jt=function(e,t){var n;ce||(wt=f);var a;if('swipe'===e){var i=ht.x-gt.x,r=10>t.lastFlickDist.x;i>pt&&(r||20<t.lastFlickOffset.x)?a=-1:i<-pt&&(r||-20>t.lastFlickOffset.x)&&(a=1)}var p;a&&(f+=a,0>f?(f=h.loop?ln()-1:0,p=!0):f>=ln()&&(f=h.loop?0:ln()-1,p=!0),(!p||h.loop)&&(Te+=a,ve-=a,n=!0));var m,u=Ie.x*ve,g=o(u-vt.x);return n||u>vt.x==0<t.lastFlickSpeed.x?(m=0<o(t.lastFlickSpeed.x)?g/o(t.lastFlickSpeed.x):333,m=l(m,400),m=s(m,250)):m=333,wt===f&&(n=!1),ce=!0,Ne('mainScrollAnimStart'),dt('mainScroll',vt.x,u,m,d.easing.cubic.out,We,function(){rt(),ce=!1,wt=-1,(n||wt!==f)&&c.updateCurrItem(),Ne('mainScrollAnimComplete')}),n&&c.updateCurrItem(!0),n},$t=function(e){return 1/re*e*I},Jt=function(){var e=_,t=$e(),n=Je();_<t?e=t:_>n&&(e=n);var a,i=ge;return he&&!j&&!ye&&_<t?(c.close(),!0):(he&&(a=function(e){Pe((1-i)*e+i)}),c.zoomTo(e,0,200,d.easing.cubic.out,a),!0)};Oe('Gestures',{publicMethods:{initGestures:function(){var e=function(e,t,n,a,i){F=e+t,R=e+n,L=e+a,N=i?e+i:''};P=q.pointerEvent,P&&q.touch&&(q.touch=!1),P?navigator.pointerEnabled?e('pointer','down','move','up','cancel'):e('MSPointer','Down','Move','Up','Cancel'):q.touch?(e('touch','start','move','end','cancel'),Z=!0):e('mouse','down','move','up'),C=R+' '+L+' '+N,E=F,P&&!Z&&(Z=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),c.likelyTouchDevice=Z,v[F]=Ut,v[R]=qt,v[L]=Yt,N&&(v[N]=v[L]),q.touch&&(E+=' mousedown',C+=' mousemove mouseup',v.mousedown=v[F],v.mousemove=v[R],v.mouseup=v[L]),Z||(h.allowPanToNext=!1)}}});var Qt,en,tn,nn,an,ln,on,sn=function(t,n,a,i){Qt&&clearTimeout(Qt),nn=!0,tn=!0;var l;t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=h.getThumbBoundsFn&&h.getThumbBoundsFn(f);var o=a?h.hideAnimationDuration:h.showAnimationDuration,s=function(){ot('initialZoom'),a?(c.template.removeAttribute('style'),c.bg.removeAttribute('style')):(Pe(1),n&&(n.style.display='block'),d.addClass(e,'pswp--animated-in'),Ne('initialZoom'+(a?'OutEnd':'InEnd'))),i&&i(),nn=!1};if(!o||!l||void 0===l.x)return Ne('initialZoom'+(a?'Out':'In')),_=t.initialZoomLevel,Ue(Ce,t.initialPosition),Be(),e.style.opacity=a?0:1,Pe(1),void(o?setTimeout(function(){s()},o):s());(function(){var n=x,i=!c.currItem.src||c.currItem.loadError||h.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility='hidden'),a||(_=l.w/t.w,Ce.x=l.x,Ce.y=l.y-W,c[i?'template':'bg'].style.opacity=1e-3,Be()),st('initialZoom'),a&&!n&&d.removeClass(e,'pswp--animated-in'),i&&(a?d[(n?'remove':'add')+'Class'](e,'pswp--animate_opacity'):setTimeout(function(){d.addClass(e,'pswp--animate_opacity')},30)),Qt=setTimeout(function(){if(Ne('initialZoom'+(a?'Out':'In')),!a)_=t.initialZoomLevel,Ue(Ce,t.initialPosition),Be(),Pe(1),i?e.style.opacity=1:Pe(1),Qt=setTimeout(s,o+20);else{var r=l.w/t.w,p={x:Ce.x,y:Ce.y},c=_,m=ge,u=function(t){1===t?(_=r,Ce.x=l.x,Ce.y=l.y-U):(_=(r-c)*t+c,Ce.x=(l.x-p.x)*t+p.x,Ce.y=(l.y-U-p.y)*t+p.y),Be(),i?e.style.opacity=1-t:Pe(m-t*m)};n?dt('initialZoom',0,1,o,d.easing.cubic.out,u,s):(u(1),Qt=setTimeout(s,o+20))}},a?25:90)})()},rn={},dn=[],pn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return en.length}},cn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},mn=function(e,n,a){var i=e.bounds;i.center.x=t((rn.x-n)/2),i.center.y=t((rn.y-a)/2)+e.vGap.top,i.max.x=n>rn.x?t(rn.x-n):i.center.x,i.max.y=a>rn.y?t(rn.y-a)+e.vGap.top:i.center.y,i.min.x=n>rn.x?0:i.center.x,i.min.y=a>rn.y?e.vGap.top:i.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var a=!n;if(a&&(!e.vGap&&(e.vGap={top:0,bottom:0}),Ne('parseVerticalMargin',e)),rn.x=t.x,rn.y=t.y-e.vGap.top-e.vGap.bottom,a){var i=rn.x/e.w,l=rn.y/e.h;e.fitRatio=i<l?i:l;var o=h.scaleMode;'orig'===o?n=1:'fit'===o&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=cn())}return n?(mn(e,e.w*n,e.h*n),a&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=cn(),e.initialPosition=e.bounds.center,e.bounds},hn=function(e,t,n,a,i,l){t.loadError||a&&(t.imageAppended=!0,xn(t,a,t===c.currItem&&Ae),n.appendChild(a),l&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display='none',t.placeholder=null)},500))},gn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=d.createEl('pswp__img','img'),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},yn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=''),e.container.innerHTML=h.errorMsg.replace('%url%',e.src),!0},xn=function(e,n,a){if(e.src){n||(n=e.container.lastChild);var i=a?e.w:t(e.w*e.fitRatio),l=a?e.h:t(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+'px',e.placeholder.style.height=l+'px'),n.style.width=i+'px',n.style.height=l+'px'}},fn=function(){if(dn.length){for(var e,t=0;t<dn.length;t++)e=dn[t],e.holder.index===e.index&&hn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);dn=[]}};Oe('Controller',{publicMethods:{lazyLoadItem:function(e){e=Fe(e);var t=an(e);t&&(!t.loaded&&!t.loading||D)&&(Ne('gettingData',e,t),t.src&&gn(t))},initController:function(){d.extend(h,pn,!0),c.items=en=a,an=c.getItemAt,ln=h.getNumItemsFn,on=h.loop,3>ln()&&(h.loop=!1),Le('beforeChange',function(e){var t,n=h.preload,a=!(null!==e)||0<=e,i=l(n[0],ln()),o=l(n[1],ln());for(t=1;t<=(a?o:i);t++)c.lazyLoadItem(f+t);for(t=1;t<=(a?i:o);t++)c.lazyLoadItem(f-t)}),Le('initialLayout',function(){c.currItem.initialLayout=h.getThumbBoundsFn&&h.getThumbBoundsFn(f)}),Le('mainScrollAnimComplete',fn),Le('initialZoomInEnd',fn),Le('destroy',function(){for(var e,t=0;t<en.length;t++)e=en[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);dn=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==en[e]&&en[e]},allowProgressiveImg:function(){return h.forceProgressiveLoading||!Z||h.mouseUsed||1200<screen.width},setContent:function(e,t){h.loop&&(t=Fe(t));var n=c.getItemAt(e.index);n&&(n.container=null);var a,i=c.getItemAt(t);if(!i)return void(e.el.innerHTML='');Ne('gettingData',t,i),e.index=t,e.item=i;var l=i.container=d.createEl('pswp__zoom-wrap');if(!i.src&&i.html&&(i.html.tagName?l.appendChild(i.html):l.innerHTML=i.html),yn(i),un(i,Ee),i.src&&!i.loadError&&!i.loaded){if(i.loadComplete=function(n){if(g){if(e&&e.index===t){if(yn(n,!0))return n.loadComplete=n.img=null,un(n,Ee),He(n),void(e.index===f&&c.updateCurrZoomItem());n.imageAppended?!nn&&n.placeholder&&(n.placeholder.style.display='none',n.placeholder=null):q.transform&&(ce||nn)?dn.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):hn(t,n,l,n.img,ce||nn,!0)}n.loadComplete=null,n.img=null,Ne('imageLoadComplete',t,n)}},d.features.transform){var o='pswp__img pswp__img--placeholder';o+=i.msrc?'':' pswp__img--placeholder--blank';var s=d.createEl(o,i.msrc?'img':'');i.msrc&&(s.src=i.msrc),xn(i,s),l.appendChild(s),i.placeholder=s}i.loading||gn(i),c.allowProgressiveImg()&&(!tn&&q.transform?dn.push({item:i,baseDiv:l,img:i.img,index:t,holder:e}):hn(t,i,l,i.img,!0,!0))}else i.src&&!i.loadError&&(a=d.createEl('pswp__img','img'),a.style.opacity=1,a.src=i.src,xn(i,a),hn(t,i,l,a,!0));tn||t!==f?He(i):(pe=l.style,sn(i,a||i.img)),e.el.innerHTML='',e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var bn,wn={},Cn=function(t,n,a){var i=document.createEvent('CustomEvent'),e={origEvent:t,target:t.target,releasePoint:n,pointerType:a||'touch'};i.initCustomEvent('pswpTap',!0,!0,e),t.target.dispatchEvent(i)};Oe('Tap',{publicMethods:{initTap:function(){Le('firstTouchStart',c.onTapStart),Le('touchRelease',c.onTapRelease),Le('destroy',function(){wn={},bn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(bn),bn=null)},onTapRelease:function(t,e){if(e&&!ne&&!ee&&!lt){var n=e;if(bn&&(clearTimeout(bn),bn=null,kt(n,wn)))return void Ne('doubleTap',n);if('mouse'===e.type)return void Cn(t,e,'mouse');var a=t.target.tagName.toUpperCase();if('BUTTON'===a||d.hasClass(t.target,'pswp__single-tap'))return void Cn(t,e);Ue(wn,n),bn=setTimeout(function(){Cn(t,e),bn=null},300)}}}});var En;Oe('DesktopZoom',{publicMethods:{initDesktopZoom:function(){K||(Z?Le('mouseUsed',function(){c.setupDesktopZoom()}):c.setupDesktopZoom(!0))},setupDesktopZoom:function(t){En={};var n='wheel mousewheel DOMMouseScroll';Le('bindEvents',function(){d.bind(e,n,c.handleMouseWheel)}),Le('unbindEvents',function(){En&&d.unbind(e,n,c.handleMouseWheel)}),c.mouseZoomedIn=!1;var a,i=function(){c.mouseZoomedIn&&(d.removeClass(e,'pswp--zoomed-in'),c.mouseZoomedIn=!1),1>_?d.addClass(e,'pswp--zoom-allowed'):d.removeClass(e,'pswp--zoom-allowed'),l()},l=function(){a&&(d.removeClass(e,'pswp--dragging'),a=!1)};Le('resize',i),Le('afterChange',i),Le('pointerDown',function(){c.mouseZoomedIn&&(a=!0,d.addClass(e,'pswp--dragging'))}),Le('pointerUp',l),t||i()},handleMouseWheel:function(t){if(_<=c.currItem.fitRatio)return h.modal&&(!h.closeOnScroll||lt||Q?t.preventDefault():z&&2<o(t.deltaY)&&(x=!0,c.close())),!0;if(t.stopPropagation(),En.x=0,'deltaX'in t)1===t.deltaMode?(En.x=18*t.deltaX,En.y=18*t.deltaY):(En.x=t.deltaX,En.y=t.deltaY);else if('wheelDelta'in t)t.wheelDeltaX&&(En.x=-0.16*t.wheelDeltaX),En.y=t.wheelDeltaY?-0.16*t.wheelDeltaY:-0.16*t.wheelDelta;else if('detail'in t)En.y=t.detail;else return;je(_,!0);var e=Ce.x-En.x,n=Ce.y-En.y;(h.modal||e<=de.min.x&&e>=de.max.x&&n<=de.min.y&&n>=de.max.y)&&t.preventDefault(),c.panTo(e,n)},toggleDesktopZoom:function(t){t=t||{x:Ee.x/2+_e.x,y:Ee.y/2+_e.y};var n=h.getDoubleTapZoom(!0,c.currItem),a=_===n;c.mouseZoomedIn=!a,c.zoomTo(a?c.currItem.initialZoomLevel:n,t,333),d[(a?'remove':'add')+'Class'](e,'pswp--zoomed-in')}}});var vn,_n,In,Tn,kn,Sn,Dn,An,On,Fn,Rn,Ln,Nn={history:!0,galleryUID:1},zn=function(){return Rn.hash.substring(1)},Pn=function(){vn&&clearTimeout(vn),In&&clearTimeout(In)},Zn=function(){var e=zn(),t={};if(5>e.length)return t;var n,a=e.split('&');for(n=0;n<a.length;n++)if(a[n]){var i=a[n].split('=');2>i.length||(t[i[0]]=i[1])}if(h.galleryPIDs){var l=t.pid;for(t.pid=0,n=0;n<en.length;n++)if(en[n].pid===l){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return 0>t.pid&&(t.pid=0),t},Bn=function(){if(In&&clearTimeout(In),lt||Q)return void(In=setTimeout(Bn,500));Tn?clearTimeout(_n):Tn=!0;var e=f+1,t=an(f);t.hasOwnProperty('pid')&&(e=t.pid);var n=Dn+'&gid='+h.galleryUID+'&pid='+e;An||-1!==Rn.hash.indexOf(n)||(Fn=!0);var a=Rn.href.split('#')[0]+'#'+n;Ln?'#'+n!==window.location.hash&&history[An?'replaceState':'pushState']('',document.title,a):An?Rn.replace(a):Rn.hash=n,An=!0,_n=setTimeout(function(){Tn=!1},60)};Oe('History',{publicMethods:{initHistory:function(){if(d.extend(h,Nn,!0),!!h.history){Rn=window.location,Fn=!1,On=!1,An=!1,Dn=zn(),Ln='pushState'in history,-1<Dn.indexOf('gid=')&&(Dn=Dn.split('&gid=')[0],Dn=Dn.split('?gid=')[0]),Le('afterChange',c.updateURL),Le('unbindEvents',function(){d.unbind(window,'hashchange',c.onHashChange)});var e=function(){Sn=!0,On||(Fn?history.back():Dn?Rn.hash=Dn:Ln?history.pushState('',document.title,Rn.pathname+Rn.search):Rn.hash=''),Pn()};Le('unbindEvents',function(){x&&e()}),Le('destroy',function(){Sn||e()}),Le('firstUpdate',function(){f=Zn().pid});var t=Dn.indexOf('pid=');-1<t&&(Dn=Dn.substring(0,t),'&'===Dn.slice(-1)&&(Dn=Dn.slice(0,-1))),setTimeout(function(){g&&d.bind(window,'hashchange',c.onHashChange)},40)}},onHashChange:function(){return zn()===Dn?(On=!0,void c.close()):void(!Tn&&(kn=!0,c.goTo(Zn().pid),kn=!1))},updateURL:function(){Pn();kn||(An?vn=setTimeout(Bn,800):Bn())}}}),d.extend(c,{shout:Ne,listen:Le,viewportSize:Ee,options:h,isMainScrollAnimating:function(){return ce},getZoomLevel:function(){return _},getCurrentIndex:function(){return f},isDragging:function(){return Q},isZooming:function(){return oe},setScrollOffset:function(e,t){_e.x=e,U=_e.y=t,Ne('updateScrollOffset',_e)},applyZoomPan:function(e,t,n,a){Ce.x=t,Ce.y=n,_=e,Be(a)},init:function(){if(!(g||y)){var t;c.framework=d,c.template=e,c.bg=d.getChildByClass(e,'pswp__bg'),M=e.className,g=!0,q=d.detectFeatures(),B=q.raf,H=q.caf,z=q.transform,K=q.oldIE,c.scrollWrap=d.getChildByClass(e,'pswp__scroll-wrap'),c.container=d.getChildByClass(c.scrollWrap,'pswp__container'),b=c.container.style,c.itemHolders=A=[{el:c.container.children[0],wrap:0,index:-1},{el:c.container.children[1],wrap:0,index:-1},{el:c.container.children[2],wrap:0,index:-1}],A[0].el.style.display=A[2].el.style.display='none',et(),v={resize:c.updateSize,orientationchange:function(){clearTimeout(G),G=setTimeout(function(){Ee.x!==c.scrollWrap.clientWidth&&c.updateSize()},500)},scroll:at,keydown:tt,click:nt};var a=q.isOldIOSPhone||q.isOldAndroid||q.isMobileOpera;for(q.animationName&&q.transform&&!a||(h.showAnimationDuration=h.hideAnimationDuration=0),t=0;t<Se.length;t++)c['init'+Se[t]]();if(n){var i=c.ui=new n(c,d);i.init()}Ne('firstUpdate'),f=f||h.index||0,(isNaN(f)||0>f||f>=ln())&&(f=0),c.currItem=an(f),(q.isOldIOSPhone||q.isOldAndroid)&&(ke=!1),e.setAttribute('aria-hidden','false'),h.modal&&(ke?e.style.position='fixed':(e.style.position='absolute',e.style.top=d.getScrollY()+'px')),void 0===U&&(Ne('initialLayout'),U=W=d.getScrollY());var l='pswp--open ';for(h.mainClass&&(l+=h.mainClass+' '),h.showHideOpacity&&(l+='pswp--animate_opacity '),l+=Z?'pswp--touch':'pswp--notouch',l+=q.animationName?' pswp--css_animation':'',l+=q.svg?' pswp--svg':'',d.addClass(e,l),c.updateSize(),w=-1,Te=null,t=0;t<u;t++)Me((t+w)*Ie.x,A[t].el.style);K||d.bind(c.scrollWrap,E,c),Le('initialZoomInEnd',function(){c.setContent(A[0],f-1),c.setContent(A[2],f+1),A[0].el.style.display=A[2].el.style.display='block',h.focus&&e.focus(),Ve()}),c.setContent(A[1],f),c.updateCurrItem(),Ne('afterInit'),ke||(S=setInterval(function(){lt||Q||oe||_!==c.currItem.initialZoomLevel||c.updateSize()},1e3)),d.addClass(e,'pswp--visible')}},close:function(){g&&(g=!1,y=!0,Ne('close'),Xe(),sn(c.currItem,null,!0,c.destroy))},destroy:function(){Ne('destroy'),Qt&&clearTimeout(Qt),e.setAttribute('aria-hidden','true'),e.className=M,S&&clearInterval(S),d.unbind(c.scrollWrap,E,c),d.unbind(window,'scroll',c),Dt(),rt(),Re=null},panTo:function(e,t,n){n||(e>de.min.x?e=de.min.x:e<de.max.x&&(e=de.max.x),t>de.min.y?t=de.min.y:t<de.max.y&&(t=de.max.y)),Ce.x=e,Ce.y=t,Be()},handleEvent:function(t){t=t||window.event,v[t.type]&&v[t.type](t)},goTo:function(e){e=Fe(e);var t=e-f;Te=t,f=e,c.currItem=an(f),ve-=t,We(Ie.x*ve),rt(),ce=!1,c.updateCurrItem()},next:function(){c.goTo(f+1)},prev:function(){c.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&Ne('beforeChange',0),A[1].el.children.length){var t=A[1].el.children[0];pe=d.hasClass(t,'pswp__zoom-wrap')?t.style:null}else pe=null;de=c.currItem.bounds,I=_=c.currItem.initialZoomLevel,Ce.x=de.center.x,Ce.y=de.center.y,e&&Ne('afterChange')},invalidateCurrItems:function(){D=!0;for(var e=0;e<u;e++)A[e].item&&(A[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Te){var t,n=o(Te);if(!(e&&2>n)){c.currItem=an(f),Ae=!1,Ne('beforeChange',Te),n>=u&&(w+=Te+(0<Te?-u:u),n=u);for(var a=0;a<n;a++)0<Te?(t=A.shift(),A[u-1]=t,w++,Me((w+2)*Ie.x,t.el.style),c.setContent(t,f-n+a+1+1)):(t=A.pop(),A.unshift(t),w--,Me(w*Ie.x,t.el.style),c.setContent(t,f+n-a-1-1));if(pe&&1===o(Te)){var i=an(O);i.initialZoomLevel!==_&&(un(i,Ee),xn(i),He(i))}Te=0,c.updateCurrZoomItem(),O=f,Ne('afterChange')}}},updateSize:function(n){if(!ke&&h.modal){var a=d.getScrollY();if(U!==a&&(e.style.top=a+'px',U=a),!n&&De.x===window.innerWidth&&De.y===window.innerHeight)return;De.x=window.innerWidth,De.y=window.innerHeight,e.style.height=De.y+'px'}if(Ee.x=c.scrollWrap.clientWidth,Ee.y=c.scrollWrap.clientHeight,at(),Ie.x=Ee.x+t(Ee.x*h.spacing),Ie.y=Ee.y,We(Ie.x*ve),Ne('beforeResize'),void 0!==w){for(var l,o,s,r=0;r<u;r++)l=A[r],Me((r+w)*Ie.x,l.el.style),s=f+r-1,h.loop&&2<ln()&&(s=Fe(s)),o=an(s),o&&(D||o.needsUpdate||!o.bounds)?(c.cleanSlide(o),c.setContent(l,s),1===r&&(c.currItem=o,c.updateCurrZoomItem(!0)),o.needsUpdate=!1):-1===l.index&&0<=s&&c.setContent(l,s),o&&o.container&&(un(o,Ee),xn(o),He(o));D=!1}I=_=c.currItem.initialZoomLevel,de=c.currItem.bounds,de&&(Ce.x=de.center.x,Ce.y=de.center.y,Be(!0)),Ne('resize')},zoomTo:function(e,t,n,a,i){t&&(I=_,_t.x=o(t.x)-Ce.x,_t.y=o(t.y)-Ce.y,Ue(we,Ce));var l=je(e,!1),s={};Qe('x',l,s,e),Qe('y',l,s,e);var r=_,p={x:Ce.x,y:Ce.y};qe(s);var c=function(t){1===t?(_=e,Ce.x=s.x,Ce.y=s.y):(_=(e-r)*t+r,Ce.x=(s.x-p.x)*t+p.x,Ce.y=(s.y-p.y)*t+p.y),i&&i(t),Be(1===t)};n?dt('customZoomTo',0,1,n,a||d.easing.sine.inOut,c):c(1)}})}})},function(e,n,a){var i,l;(function(t,o){i=o,l='function'==typeof i?i.call(n,a,n,e):i,!(l!==void 0&&(e.exports=l))})(this,function(){'use strict';return function(n,l){var a,i,e,o,s,r,d,p,c,m,u,h,g,y,x,f,b,w,C=this,E=!1,v=!0,_=!0,I={barsSize:{top:44,bottom:'auto'},closeElClasses:['item','caption','zoom-wrap','ui','top-bar'],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML='',!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:'facebook',label:'Share on Facebook',url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},{id:'twitter',label:'Tweet',url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},{id:'pinterest',label:'Pin it',url:'http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}'},{id:'download',label:'Download image',url:'{{raw_image_url}}',download:!0}],getImageURLForShare:function(){return n.currItem.src||''},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return n.currItem.title||''},indexIndicatorSep:' / ',fitControlsWidth:1200},T=function(t){if(f)return!0;t=t||window.event,x.timeToIdle&&x.mouseUsed&&!c&&z();for(var e,n,a=t.target||t.srcElement,o=a.getAttribute('class')||'',s=0;s<U.length;s++)e=U[s],e.onTap&&-1<o.indexOf('pswp__'+e.name)&&(e.onTap(),n=!0);if(n){t.stopPropagation&&t.stopPropagation(),f=!0;var i=l.features.isOldAndroid?600:30;setTimeout(function(){f=!1},i)}},k=function(){return!n.likelyTouchDevice||x.mouseUsed||screen.width>x.fitControlsWidth},S=function(e,t,n){l[(n?'add':'remove')+'Class'](e,'pswp__'+t)},D=function(){var e=1===x.getNumItemsFn();e!==y&&(S(i,'ui--one-slide',e),y=e)},A=function(){S(d,'share-modal--hidden',_)},O=function(){return _=!_,_?(l.removeClass(d,'pswp__share-modal--fade-in'),setTimeout(function(){_&&A()},300)):(A(),setTimeout(function(){_||l.addClass(d,'pswp__share-modal--fade-in')},30)),_||R(),!1},F=function(a){a=a||window.event;var e=a.target||a.srcElement;return(n.shout('shareLinkClick',a,e),!!e.href)&&(!!e.hasAttribute('download')||(window.open(e.href,'pswp_share','scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left='+(window.screen?t(screen.width/2-275):100)),_||O(),!1))},R=function(){for(var e,t,n,a,l,o='',s=0;s<x.shareButtons.length;s++)e=x.shareButtons[s],n=x.getImageURLForShare(e),a=x.getPageURLForShare(e),l=x.getTextForShare(e),t=e.url.replace('{{url}}',encodeURIComponent(a)).replace('{{image_url}}',encodeURIComponent(n)).replace('{{raw_image_url}}',n).replace('{{text}}',encodeURIComponent(l)),o+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?'download':'')+'>'+e.label+'</a>',x.parseShareButtonOut&&(o=x.parseShareButtonOut(e,o));d.children[0].innerHTML=o,d.children[0].onclick=F},L=function(e){for(var t=0;t<x.closeElClasses.length;t++)if(l.hasClass(e,'pswp__'+x.closeElClasses[t]))return!0},N=0,z=function(){clearTimeout(w),N=0,c&&C.setIdle(!1)},P=function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&'HTML'!==e.nodeName||(clearTimeout(w),w=setTimeout(function(){C.setIdle(!0)},x.timeToIdleOutside))},Z=function(){x.fullscreenEl&&!l.features.isOldAndroid&&(!a&&(a=C.getFullscreenAPI()),a?(l.bind(document,a.eventK,C.updateFullscreen),C.updateFullscreen(),l.addClass(n.template,'pswp--supports-fs')):l.removeClass(n.template,'pswp--supports-fs'))},B=function(){x.preloaderEl&&(H(!0),m('beforeChange',function(){clearTimeout(g),g=setTimeout(function(){n.currItem&&n.currItem.loading?(!n.allowProgressiveImg()||n.currItem.img&&!n.currItem.img.naturalWidth)&&H(!1):H(!0)},x.loadingIndicatorDelay)}),m('imageLoadComplete',function(e,t){n.currItem===t&&H(!0)}))},H=function(e){h!==e&&(S(u,'preloader--active',!e),h=e)},M=function(t){var n=t.vGap;if(k()){var a=x.barsSize;if(!(x.captionEl&&'auto'===a.bottom))n.bottom='auto'===a.bottom?0:a.bottom;else if(o||(o=l.createEl('pswp__caption pswp__caption--fake'),o.appendChild(l.createEl('pswp__caption__center')),i.insertBefore(o,e),l.addClass(i,'pswp__ui--fit')),x.addCaptionHTMLFn(t,o,!0)){var s=o.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;n.top=a.top}else n.top=n.bottom=0},W=function(){x.timeToIdle&&m('mouseUsed',function(){l.bind(document,'mousemove',z),l.bind(document,'mouseout',P),b=setInterval(function(){N++,2==N&&C.setIdle(!0)},x.timeToIdle/2)})},K=function(){m('onVerticalDrag',function(e){v&&0.95>e?C.hideControls():!v&&0.95<=e&&C.showControls()});var e;m('onPinchClose',function(t){v&&0.9>t?(C.hideControls(),e=!0):e&&!v&&0.9<t&&C.showControls()}),m('zoomGestureEnded',function(){e=!1,e&&!v&&C.showControls()})},U=[{name:'caption',option:'captionEl',onInit:function(t){e=t}},{name:'share-modal',option:'shareEl',onInit:function(e){d=e},onTap:function(){O()}},{name:'button--share',option:'shareEl',onInit:function(e){r=e},onTap:function(){O()}},{name:'button--zoom',option:'zoomEl',onTap:n.toggleDesktopZoom},{name:'counter',option:'counterEl',onInit:function(e){s=e}},{name:'button--close',option:'closeEl',onTap:n.close},{name:'button--arrow--left',option:'arrowEl',onTap:n.prev},{name:'button--arrow--right',option:'arrowEl',onTap:n.next},{name:'button--fs',option:'fullscreenEl',onTap:function(){a.isFullscreen()?a.exit():a.enter()}},{name:'preloader',option:'preloaderEl',onInit:function(e){u=e}}],q=function(){var e,t,n,a=function(o){if(o)for(var s=o.length,r=0;r<s;r++){e=o[r],t=e.className;for(var i=0;i<U.length;i++)n=U[i],-1<t.indexOf('pswp__'+n.name)&&(x[n.option]?(l.removeClass(e,'pswp__element--disabled'),n.onInit&&n.onInit(e)):l.addClass(e,'pswp__element--disabled'))}};a(i.children);var o=l.getChildByClass(i,'pswp__top-bar');o&&a(o.children)};C.init=function(){l.extend(n.options,I,!0),x=n.options,i=l.getChildByClass(n.scrollWrap,'pswp__ui'),m=n.listen,K(),m('beforeChange',C.update),m('doubleTap',function(e){var t=n.currItem.initialZoomLevel;n.getZoomLevel()===t?n.zoomTo(x.getDoubleTapZoom(!1,n.currItem),e,333):n.zoomTo(t,e,333)}),m('preventDragEvent',function(n,e,a){var i=n.target||n.srcElement;i&&i.getAttribute('class')&&-1<n.type.indexOf('mouse')&&(0<i.getAttribute('class').indexOf('__caption')||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(a.prevent=!1)}),m('bindEvents',function(){l.bind(i,'pswpTap click',T),l.bind(n.scrollWrap,'pswpTap',C.onGlobalTap),n.likelyTouchDevice||l.bind(n.scrollWrap,'mouseover',C.onMouseOver)}),m('unbindEvents',function(){_||O(),b&&clearInterval(b),l.unbind(document,'mouseout',P),l.unbind(document,'mousemove',z),l.unbind(i,'pswpTap click',T),l.unbind(n.scrollWrap,'pswpTap',C.onGlobalTap),l.unbind(n.scrollWrap,'mouseover',C.onMouseOver),a&&(l.unbind(document,a.eventK,C.updateFullscreen),a.isFullscreen()&&(x.hideAnimationDuration=0,a.exit()),a=null)}),m('destroy',function(){x.captionEl&&(o&&i.removeChild(o),l.removeClass(e,'pswp__caption--empty')),d&&(d.children[0].onclick=null),l.removeClass(i,'pswp__ui--over-close'),l.addClass(i,'pswp__ui--hidden'),C.setIdle(!1)}),x.showAnimationDuration||l.removeClass(i,'pswp__ui--hidden'),m('initialZoomIn',function(){x.showAnimationDuration&&l.removeClass(i,'pswp__ui--hidden')}),m('initialZoomOut',function(){l.addClass(i,'pswp__ui--hidden')}),m('parseVerticalMargin',M),q(),x.shareEl&&r&&d&&(_=!0),D(),W(),Z(),B()},C.setIdle=function(e){c=e,S(i,'ui--idle',e)},C.update=function(){v&&n.currItem?(C.updateIndexIndicator(),x.captionEl&&(x.addCaptionHTMLFn(n.currItem,e),S(e,'caption--empty',!n.currItem.title)),E=!0):E=!1,_||O(),D()},C.updateFullscreen=function(t){t&&setTimeout(function(){n.setScrollOffset(0,l.getScrollY())},50),l[(a.isFullscreen()?'add':'remove')+'Class'](n.template,'pswp--fs')},C.updateIndexIndicator=function(){x.counterEl&&(s.innerHTML=n.getCurrentIndex()+1+x.indexIndicatorSep+x.getNumItemsFn())},C.onGlobalTap=function(t){t=t||window.event;var e=t.target||t.srcElement;if(!f)if(t.detail&&'mouse'===t.detail.pointerType){if(L(e))return void n.close();l.hasClass(e,'pswp__img')&&(1===n.getZoomLevel()&&n.getZoomLevel()<=n.currItem.fitRatio?x.clickToCloseNonZoomable&&n.close():n.toggleDesktopZoom(t.detail.releasePoint))}else if(x.tapToToggleControls&&(v?C.hideControls():C.showControls()),x.tapToClose&&(l.hasClass(e,'pswp__img')||L(e)))return void n.close()},C.onMouseOver=function(t){t=t||window.event;var e=t.target||t.srcElement;S(i,'ui--over-close',L(e))},C.hideControls=function(){l.addClass(i,'pswp__ui--hidden'),v=!1},C.showControls=function(){v=!0,E||C.update(),l.removeClass(i,'pswp__ui--hidden')},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var e,t=document.documentElement,a='fullscreenchange';return t.requestFullscreen?e={enterK:'requestFullscreen',exitK:'exitFullscreen',elementK:'fullscreenElement',eventK:a}:t.mozRequestFullScreen?e={enterK:'mozRequestFullScreen',exitK:'mozCancelFullScreen',elementK:'mozFullScreenElement',eventK:'moz'+a}:t.webkitRequestFullscreen?e={enterK:'webkitRequestFullscreen',exitK:'webkitExitFullscreen',elementK:'webkitFullscreenElement',eventK:'webkit'+a}:t.msRequestFullscreen&&(e={enterK:'msRequestFullscreen',exitK:'msExitFullscreen',elementK:'msFullscreenElement',eventK:'MSFullscreenChange'}),e&&(e.enter=function(){return p=x.closeOnScroll,x.closeOnScroll=!1,'webkitRequestFullscreen'===this.enterK?void n.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):n.template[this.enterK]()},e.exit=function(){return x.closeOnScroll=p,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})},function(e,t,n){'use strict';var a=n(0);class i{constructor(e){this._collection=null,this._filters=[],this.gallery=e}addFilter(e){this.filters.push(e)}refresh(){this.filters.forEach(function(e){e.render()})}render(){let e=document.createElement('div');a.a.addClass(e,'natural-gallery-images sectionContainer'),e.appendChild(a.a.getIcon('icon-pict'));let t=document.createElement('div');a.a.addClass(t,'sectionName'),t.textContent=this.gallery.options.labelImages,e.appendChild(t);let n=document.createElement('span');e.appendChild(n),a.a.addClass(n,'natural-gallery-visible');let i=document.createElement('span');i.textContent='/',e.appendChild(i);let l=document.createElement('span');return a.a.addClass(l,'natural-gallery-total'),e.appendChild(l),this.element=document.createElement('div'),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),a.a.addClass(this.element,'natural-gallery-header'),this.element.appendChild(e),this.element}isFiltered(){return null!==this.collection}filter(){let e=null;this.filters.forEach(function(t){t.isActive()&&(null==e?e=t.collection:e=a.a.intersectionBy(e,t.collection,'id'))}),this.collection=e,this.gallery.refresh()}get collection(){return this._collection}set collection(e){this._collection=e}get element(){return this._element}set element(e){this._element=e}get gallery(){return this._gallery}set gallery(e){this._gallery=e}get filters(){return this._filters}set filters(e){this._filters=e}}t.a=i},function(e,t,n){'use strict';var a=n(0),i=n(1);class l extends i.a{render(){let e=document.createElement('div');a.a.addClass(e,'natural-gallery-searchTerm sectionContainer'),e.appendChild(a.a.getIcon('icon-search')),e.appendChild(this.getInput());let t=document.createElement('label');a.a.addClass(t,'sectionName'),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);let n=document.createElement('span');return a.a.addClass(n,'bar'),e.appendChild(n),e}getInput(){const e=this;let t=document.createElement('input');return t.setAttribute('required',''),t.addEventListener('keyup',function(t){let n=this;27===t.keyCode&&(n.value=''),e.filter(n.value)}),t}filter(e){this.collection=null;let t=a.a.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){let n=a.a.removeDiacritics(e.title+' '+(e.description?e.description:'')).toLowerCase();-1!==n.search(t)&&this.collection.push(e)},this)),this.header.filter()}}t.a=l},function(e,t,n){'use strict';var a=n(1),i=n(13),l=n(0);class o extends a.a{constructor(e){super(e),this.header=e,this._categories=[]}set element(e){this._element=e}render(){if(this.prepare(),!this.element){this.element=document.createElement('div'),l.a.addClass(this.element,'natural-gallery-categories sectionContainer');let e=document.createElement('div');l.a.addClass(e,'sectionName'),e.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(e)}let e=this.element.getElementsByTagName('label')[0];return e&&e.parentNode.removeChild(e),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element}prepare(){let e=[];this.header.gallery.categories.forEach(function(t){e.push(new i.a(t.id,t.title,this))},this),this.none=new i.a(-1,this.header.gallery.options.labelNone,this),this.others=new i.a(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&e.length&&e.push(this.none),this.header.gallery.options.showOthers&&e.length&&e.push(this.others);let t=[];this.header.gallery.getOriginalCollection().forEach(function(n){(!n.categories||n.categories&&0===n.categories.length&&this.header.gallery.options.showNone)&&(n.categories=[this.none]),e.length&&l.a.differenceBy(n.categories,e,'id').length===n.categories.length&&this.header.gallery.options.showOthers&&(n.categories=[this.others]),n.categories.forEach(function(e){t.push(new i.a(e.id,e.title,this))},this)},this),e=l.a.uniqBy(e,'id'),t=l.a.uniqBy(t,'id'),this.categories=e.length?l.a.intersectionBy(e,t,'id'):t}filter(){let e=this.categories.filter(function(e){return e.isActive});if(e.length===this.categories.length)this.collection=null;else if(0===e.length)this.collection=[];else{let t=[];this.header.gallery.getOriginalCollection().forEach(function(n){!n.categories||n.categories&&0===n.categories.length?this.none&&t.push(n):n.categories.some(function(a){let i=e.some(function(e){return a.id===e.id});if(i)return t.push(n),!0})},this),this.collection=t}this.header.filter()}get categories(){return this._categories}set categories(e){this._categories=e}get others(){return this._others}set others(e){this._others=e}get none(){return this._none}set none(e){this._none=e}get element(){return this._element}}t.a=o},function(e,t,n){'use strict';var a=n(0);class i{constructor(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}render(){const e=this;this.element=document.createElement('label');let t=document.createElement('input');t.setAttribute('type','checkbox'),t.setAttribute('checked','checked'),t.addEventListener('change',function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);let n=document.createElement('span');n.textContent=this.title;let i=document.createElement('span');a.a.addClass(i,'label'),i.appendChild(a.a.getIcon('icon-category')),i.appendChild(n),this.element.appendChild(i);let l=document.createElement('span');return a.a.addClass(l,'bar'),this.element.appendChild(l),this.element}get id(){return this._id}set id(e){this._id=e}get title(){return this._title}set title(e){this._title=e}get isActive(){return this._isActive}set isActive(e){this._isActive=e}get element(){return this._element}set element(e){this._element=e}}t.a=i},function(n,a,i){'use strict';i.d(a,'a',function(){return l});var l;(function(n){n.organize=function(e){'natural'===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):'square'===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):'square'===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},n.organizeSquareByRowHeight=function(n,a,i,l){l||(l=0);let o=Math.ceil((a+l)/(i+l)),s=t((a+l-o*l)/o),r=a-o*s-(o-1)*l;for(let t,d=0;d<n.length;d++)t=n[d],t.last=d%o==o-1,t.row=e(d/o),t.width=e(s),t.height=e(s),t.last&&(t.width=e(s+r))},n.organizeSquareByImagesPerRow=function(t,n,a,i){i||(i=0),a||(a=4);let l=(n-(a-1)*i)/a;for(let o,s=0;s<t.length;s++)o=t[s],o.width=e(l),o.height=e(l),o.last=s%a==a-1,o.row=e(s/a)},n.organizeNatural=function(e,t,n,a,i=null){i||(i=0),a||(a=0),n||(n=300);for(let l=1;l<=e.length;l++){let o=e.slice(0,l),s=this.getRowWidth(n,a,o);if(s>=t){this.computeSizes(o,t,a,i),this.organizeNatural(e.slice(l),t,n,a,i+1);break}else if(l===e.length){this.computeSizes(o,null,a,i,n);break}}},n.computeSizes=function(n,a,i,l,o=null){let s=a?this.getRowHeight(a,i,n):o,r=this.getRowWidth(s,i,n),d=a?this.apportionExcess(n,a,r):0,p=0;for(let r=0;r<n.length;r++){let a=n[r],i=this.getImageRatio(a)*s-d;p+=i-e(i),i=e(i),(1<=p||r===n.length-1&&1===t(p))&&(i++,p--),a.width=i,a.height=e(s),a.row=l,a.last=r===n.length-1}},n.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},n.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},n.getRatios=function(e){const t=this;let n=0;for(let a=0;a<e.length;a++)n+=t.getImageRatio(e[a]);return n},n.getImageRatio=function(e){return+e.tWidth/+e.tHeight},n.apportionExcess=function(e,t,n){let a=(n-t)/e.length;return a}})(l||(l={}))}])});